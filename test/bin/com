nocolor="$(tput sgr0)"
red="$(tput setaf 1)"
green="$(tput setaf 2)"

if [ $(purs --version) == '0.13.6' ]; then
  printf '%s%s%s\n' $green 'Compiling...' $nocolor &&
  purs compile 'bower_components/purescript-*/src/**/*.purs' 'src/*.purs' --no-prefix -o 'out' &&
  purs bundle 'out/**/*.js' -o 'bin/compiled.js' -m Pull -m Push -m SetMap.Pull -m SetMap.Push -m EqSpec.Pull -m EqSpec.Push &&
  printf '%s%s%s\n' $green 'Compiled.' $nocolor;
else
  printf '%s%s%s\n' $red 'Update purs' $nocolor;
fi
